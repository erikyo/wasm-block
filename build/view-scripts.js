!function(){"use strict";const t=-8,e=-4,n=1,r=2,o=1,i=2,a=4,c=6,s=2048,u=4096,l=16384,f=0,y=4,b=8,w=12,g=12,p=16,h="Operation requires compiling with --exportTable",m=()=>{throw Error("Operation requires compiling with --exportRuntime")},A="undefined"!=typeof BigUint64Array,_=Symbol(),d=192,O=1024,U=new TextDecoder("utf-16le",{fatal:!0});function E(t,n){let r=new Uint32Array(t)[n+e>>>2]>>>1;const o=new Uint16Array(t,n,r);if(r<=d)return String.fromCharCode(...o);try{return U.decode(o)}catch{let t="",e=0;for(;r-e>O;)t+=String.fromCharCode(...o.subarray(e,e+=O));return t+String.fromCharCode(...o.subarray(e))}}function S(t){const e={};function n(t,e){return t?E(t.buffer,e):"<yet unknown>"}const r=t.env=t.env||{};return r.abort=r.abort||function(t,o,i,a){const c=e.memory||r.memory;throw Error(`abort: ${n(c,t)} at ${n(c,o)}:${i}:${a}`)},r.trace=r.trace||function(t,o,...i){const a=e.memory||r.memory;console.log(`trace: ${n(a,t)}${o?" ":""}${i.slice(0,o).join(", ")}`)},r.seed=r.seed||Date.now,t.Math=t.Math||Math,t.Date=t.Date||Date,e}function j(_,d){const O=d.exports,U=O.memory,S=O.table,j=O.__new||m,$=O.__pin||m,v=O.__unpin||m,C=O.__collect||m,I=O.__rtti_base,B=I?t=>t[I>>>2]:m;function M(t){const e=function(t){const e=new Uint32Array(U.buffer);if((t>>>=0)>=B(e))throw Error(`invalid id: ${t}`);return e[(I+4>>>2)+t]}(t);if(!(e&(o|i|a)))throw Error(`not an array: ${t}, flags=${e}`);return e}function P(t){return 31-Math.clz32(t>>>c&31)}function W(t,e,n){const r=U.buffer;if(n)switch(t){case 2:return new Float32Array(r);case 3:return new Float64Array(r)}else switch(t){case 0:return new(e?Int8Array:Uint8Array)(r);case 1:return new(e?Int16Array:Uint16Array)(r);case 2:return new(e?Int32Array:Uint32Array)(r);case 3:return new(e?BigInt64Array:BigUint64Array)(r)}throw Error(`unsupported align: ${t}`)}function k(n){const r=new Uint32Array(U.buffer),o=M(r[n+t>>>2]),c=P(o);let l=o&a?n:r[n+y>>>2];const f=o&i?r[n+g>>>2]:r[l+e>>>2]>>>c;return W(c,o&s,o&u).subarray(l>>>=c,l+f)}function D(t,e,n){return new t(F(t,e,n))}function F(t,e,n){const r=U.buffer,o=new Uint32Array(r);return new t(r,o[n+y>>>2],o[n+b>>>2]>>>e)}function q(t,e,n){_[`__get${e}`]=D.bind(null,t,n),_[`__get${e}View`]=F.bind(null,t,n)}return _.__new=j,_.__pin=$,_.__unpin=v,_.__collect=C,_.__newString=function(t){if(null==t)return 0;const e=t.length,n=j(e<<1,r),o=new Uint16Array(U.buffer);for(let r=0,i=n>>>1;r<e;++r)o[i+r]=t.charCodeAt(r);return n},_.__newArrayBuffer=function(t){if(null==t)return 0;const e=new Uint8Array(t),r=j(e.length,n);return new Uint8Array(U.buffer).set(e,r),r},_.__getString=function(e){if(!e)return null;const n=U.buffer;if(new Uint32Array(n)[e+t>>>2]!==r)throw Error(`not a string: ${e}`);return E(n,e)},_.__newArray=function(t,e=0){const r=e,o=M(t),c=P(o),h="number"!=typeof r,m=h?r.length:r,A=j(m<<c,o&a?t:n);let _;if(o&a)_=A;else{$(A);const e=j(o&i?p:w,t);v(A);const n=new Uint32Array(U.buffer);n[e+f>>>2]=A,n[e+y>>>2]=A,n[e+b>>>2]=m<<c,o&i&&(n[e+g>>>2]=m),_=e}if(h){const t=W(c,o&s,o&u),e=A>>>c;if(o&l)for(let n=0;n<m;++n)t[e+n]=r[n];else t.set(r,e)}return _},_.__getArrayView=k,_.__getArray=function(t){const e=k(t),n=e.length,r=new Array(n);for(let t=0;t<n;t++)r[t]=e[t];return r},_.__getArrayBuffer=function(t){const n=U.buffer,r=new Uint32Array(n)[t+e>>>2];return n.slice(t,t+r)},_.__getFunction=function(t){if(!S)throw Error(h);const e=new Uint32Array(U.buffer)[t>>>2];return S.get(e)},[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach((t=>{q(t,t.name,31-Math.clz32(t.BYTES_PER_ELEMENT))})),A&&[BigUint64Array,BigInt64Array].forEach((t=>{q(t,t.name.slice(3),3)})),_.memory=_.memory||U,_.table=_.table||S,x(O,_)}function $(t){return"undefined"!=typeof Response&&t instanceof Response}function v(t){return t instanceof WebAssembly.Module}async function C(t,e={}){if($(t=await t))return I(t,e);const n=v(t)?t:await WebAssembly.compile(t),r=S(e),o=await WebAssembly.instantiate(n,e);return{module:n,instance:o,exports:j(r,o)}}async function I(t,e={}){if(!WebAssembly.instantiateStreaming)return C($(t=await t)?t.arrayBuffer():t,e);const n=S(e),r=await WebAssembly.instantiateStreaming(t,e),o=j(n,r.instance);return{...r,exports:o}}function x(t,e={}){const n=t.__argumentsLength?e=>{t.__argumentsLength.value=e}:t.__setArgumentsLength||t.__setargc||(()=>{});for(let r of Object.keys(t)){const o=t[r];let i=r.split("."),a=e;for(;i.length>1;){let t=i.shift();Object.hasOwn(a,t)||(a[t]={}),a=a[t]}let c=i[0],s=c.indexOf("#");if(s>=0){const e=c.substring(0,s),i=a[e];if(void 0===i||!i.prototype){const t=function(...e){return t.wrap(t.prototype.constructor(0,...e))};t.prototype={valueOf(){return this[_]}},t.wrap=function(e){return Object.create(t.prototype,{[_]:{value:e,writable:!1}})},i&&Object.getOwnPropertyNames(i).forEach((e=>Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e)))),a[e]=t}if(c=c.substring(s+1),a=a[e].prototype,/^(get|set):/.test(c)){if(!Object.hasOwn(a,c=c.substring(4))){let e=t[r.replace("set:","get:")],n=t[r.replace("get:","set:")];Object.defineProperty(a,c,{get(){return e(this[_])},set(t){n(this[_],t)},enumerable:!0})}}else"constructor"===c?(a[c]=function(...t){return n(t.length),o(...t)}).original=o:(a[c]=function(...t){return n(t.length),o(this[_],...t)}).original=o}else/^(get|set):/.test(c)?Object.hasOwn(a,c=c.substring(4))||Object.defineProperty(a,c,{get:t[r.replace("set:","get:")],set:t[r.replace("get:","set:")],enumerable:!0}):"function"==typeof o&&o!==n?(a[c]=(...t)=>(n(t.length),o(...t))).original=o:a[c]=o}return e}Object.hasOwn=Object.hasOwn||function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var B={instantiate:C,instantiateSync:function(t,e={}){const n=v(t)?t:new WebAssembly.Module(t),r=S(e),o=new WebAssembly.Instance(n,e);return{module:n,instance:o,exports:j(r,o)}},instantiateStreaming:I,demangle:x};let M=null;onload=()=>{M||async function(){return B.instantiate(fetch("http://localhost:8888/wp-content/plugins/wp-wasm-block/build/hello.wasm"),{}).then((t=>t))}().then((t=>{M=t.exports;const e=function(t,e){let n="";for(let r=t;e[r];r++)n+=String.fromCharCode(e[r]);return n}(M.hello(),new Uint8Array(M.memory.buffer));document.querySelectorAll(".block-wasm").forEach((t=>{t.value=e}))})).catch((t=>console.log(t))),document.querySelectorAll(".block-wasm input.button").forEach((t=>{t.onclick=()=>{const e=t.previousSibling;e.value=parseInt(M.fib(e.value),10)}}))}}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFNBQVMzQyxFQUFRbEcsR0FFbEQsTUFBTyxDQUFFa0csU0FBUTVFLFdBQVVDLFFBRFhGLEVBQWdCK0UsRUFBVTlFLEdBRTVDLEVBc0dFMkUsdUJBQ0FWLFlDamNLLElBQUl1RCxFQUFrQixLQUU3QkMsT0FBU0EsS0FDREQsR0NLRGhELGlCQUNOLE9BQU9rRCxFQUFBQSxZQUVMQyxNQUNDLDJFQUVELENBQUMsR0FFREMsTUFBUWhELEdBQVlBLEdBQ3ZCLENEYkVpRCxHQUNFRCxNQUFRckQsSUFDUmlELEVBQU1qRCxFQUFPdEUsUUFFYixNQUFNakIsRUNSSCxTQUEwQjRILEVBQU0vSSxHQUN0QyxJQUFJaUssRUFBUyxHQUNiLElBQU0sSUFBSXJGLEVBQUltRSxFQUFNL0ksRUFBUTRFLEdBQUtBLElBQ2hDcUYsR0FBVTNKLE9BQU9DLGFBQWNQLEVBQVE0RSxJQUV4QyxPQUFPcUYsQ0FDUixDREVnQkMsQ0FDWFAsRUFBSVEsUUFDSixJQUFJeEcsV0FBWWdHLEVBQUkzSSxPQUFPaEIsU0FFNUJvSyxTQUFTQyxpQkFBa0IsZUFBZ0JuRSxTQUFXb0UsSUFDckRBLEVBQUdsRCxNQUFRakcsQ0FBRyxHQUNaLElBRUhvSixPQUFTQyxHQUFTOUksUUFBUUMsSUFBSzZJLEtBRWxDSixTQUFTQyxpQkFBa0IsNEJBQTZCbkUsU0FBV29FLElBQ2xFQSxFQUFHRyxRQUFVLEtBQ1osTUFBTXBGLEVBQVFpRixFQUFHSSxnQkFDakJyRixFQUFNK0IsTUFBUXVELFNBQVNoQixFQUFJaUIsSUFBS3ZGLEVBQU0rQixPQUFTLEdBQUcsQ0FDbEQsR0FDQyxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2FzbS1ibG9jay8uL25vZGVfbW9kdWxlcy9AYXNzZW1ibHlzY3JpcHQvbG9hZGVyL2luZGV4LmpzIiwid2VicGFjazovL3dhc20tYmxvY2svLi9zcmMvdmlldy1zY3JpcHRzLnRzIiwid2VicGFjazovL3dhc20tYmxvY2svLi9zcmMvd2FzbUxvYWRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBSdW50aW1lIGhlYWRlciBvZmZzZXRzXG5jb25zdCBJRF9PRkZTRVQgPSAtODtcbmNvbnN0IFNJWkVfT0ZGU0VUID0gLTQ7XG5cbi8vIFJ1bnRpbWUgaWRzXG4vLyBjb25zdCBPQkpFQ1RfSUQgPSAwO1xuY29uc3QgQVJSQVlCVUZGRVJfSUQgPSAxO1xuY29uc3QgU1RSSU5HX0lEID0gMjtcblxuLy8gUnVudGltZSB0eXBlIGluZm9ybWF0aW9uXG5jb25zdCBBUlJBWUJVRkZFUlZJRVcgPSAxIDw8IDA7XG5jb25zdCBBUlJBWSA9IDEgPDwgMTtcbmNvbnN0IFNUQVRJQ0FSUkFZID0gMSA8PCAyO1xuLy8gY29uc3QgU0VUID0gMSA8PCAzO1xuLy8gY29uc3QgTUFQID0gMSA8PCA0O1xuY29uc3QgVkFMX0FMSUdOX09GRlNFVCA9IDY7XG4vLyBjb25zdCBWQUxfQUxJR04gPSAxIDw8IFZBTF9BTElHTl9PRkZTRVQ7XG5jb25zdCBWQUxfU0lHTkVEID0gMSA8PCAxMTtcbmNvbnN0IFZBTF9GTE9BVCA9IDEgPDwgMTI7XG4vLyBjb25zdCBWQUxfTlVMTEFCTEUgPSAxIDw8IDEzO1xuY29uc3QgVkFMX01BTkFHRUQgPSAxIDw8IDE0O1xuLy8gY29uc3QgS0VZX0FMSUdOX09GRlNFVCA9IDE1O1xuLy8gY29uc3QgS0VZX0FMSUdOID0gMSA8PCBLRVlfQUxJR05fT0ZGU0VUO1xuLy8gY29uc3QgS0VZX1NJR05FRCA9IDEgPDwgMjA7XG4vLyBjb25zdCBLRVlfRkxPQVQgPSAxIDw8IDIxO1xuLy8gY29uc3QgS0VZX05VTExBQkxFID0gMSA8PCAyMjtcbi8vIGNvbnN0IEtFWV9NQU5BR0VEID0gMSA8PCAyMztcblxuLy8gQXJyYXkoQnVmZmVyVmlldykgbGF5b3V0XG5jb25zdCBBUlJBWUJVRkZFUlZJRVdfQlVGRkVSX09GRlNFVCA9IDA7XG5jb25zdCBBUlJBWUJVRkZFUlZJRVdfREFUQVNUQVJUX09GRlNFVCA9IDQ7XG5jb25zdCBBUlJBWUJVRkZFUlZJRVdfQllURUxFTkdUSF9PRkZTRVQgPSA4O1xuY29uc3QgQVJSQVlCVUZGRVJWSUVXX1NJWkUgPSAxMjtcbmNvbnN0IEFSUkFZX0xFTkdUSF9PRkZTRVQgPSAxMjtcbmNvbnN0IEFSUkFZX1NJWkUgPSAxNjtcblxuY29uc3QgRV9OT19FWFBPUlRfVEFCTEUgICA9IFwiT3BlcmF0aW9uIHJlcXVpcmVzIGNvbXBpbGluZyB3aXRoIC0tZXhwb3J0VGFibGVcIjtcbmNvbnN0IEVfTk9fRVhQT1JUX1JVTlRJTUUgPSBcIk9wZXJhdGlvbiByZXF1aXJlcyBjb21waWxpbmcgd2l0aCAtLWV4cG9ydFJ1bnRpbWVcIjtcbmNvbnN0IEZfTk9fRVhQT1JUX1JVTlRJTUUgPSAoKSA9PiB7IHRocm93IEVycm9yKEVfTk9fRVhQT1JUX1JVTlRJTUUpOyB9O1xuXG5jb25zdCBCSUdJTlQgPSB0eXBlb2YgQmlnVWludDY0QXJyYXkgIT09IFwidW5kZWZpbmVkXCI7XG5jb25zdCBUSElTID0gU3ltYm9sKCk7XG5cbmNvbnN0IFNUUklOR19TTUFMTFNJWkUgPSAxOTI7IC8vIGJyZWFrLWV2ZW4gcG9pbnQgaW4gVjhcbmNvbnN0IFNUUklOR19DSFVOS1NJWkUgPSAxMDI0OyAvLyBtaXRpZ2F0ZSBzdGFjayBvdmVyZmxvd1xuY29uc3QgdXRmMTYgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtMTZsZVwiLCB7IGZhdGFsOiB0cnVlIH0pOyAvLyAhPSB3dGYxNlxuXG4vKiogcG9seWZpbGwgZm9yIE9iamVjdC5oYXNPd24gKi9cbk9iamVjdC5oYXNPd24gPSBPYmplY3QuaGFzT3duIHx8IGZ1bmN0aW9uKG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59O1xuXG4vKiogR2V0cyBhIHN0cmluZyBmcm9tIG1lbW9yeS4gKi9cbmZ1bmN0aW9uIGdldFN0cmluZ0ltcGwoYnVmZmVyLCBwdHIpIHtcbiAgbGV0IGxlbiA9IG5ldyBVaW50MzJBcnJheShidWZmZXIpW3B0ciArIFNJWkVfT0ZGU0VUID4+PiAyXSA+Pj4gMTtcbiAgY29uc3Qgd3RmMTYgPSBuZXcgVWludDE2QXJyYXkoYnVmZmVyLCBwdHIsIGxlbik7XG4gIGlmIChsZW4gPD0gU1RSSU5HX1NNQUxMU0laRSkgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoLi4ud3RmMTYpO1xuICB0cnkge1xuICAgIHJldHVybiB1dGYxNi5kZWNvZGUod3RmMTYpO1xuICB9IGNhdGNoIHtcbiAgICBsZXQgc3RyID0gXCJcIiwgb2ZmID0gMDtcbiAgICB3aGlsZSAobGVuIC0gb2ZmID4gU1RSSU5HX0NIVU5LU0laRSkge1xuICAgICAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoLi4ud3RmMTYuc3ViYXJyYXkob2ZmLCBvZmYgKz0gU1RSSU5HX0NIVU5LU0laRSkpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyICsgU3RyaW5nLmZyb21DaGFyQ29kZSguLi53dGYxNi5zdWJhcnJheShvZmYpKTtcbiAgfVxufVxuXG4vKiogUHJlcGFyZXMgdGhlIGJhc2UgbW9kdWxlIHByaW9yIHRvIGluc3RhbnRpYXRpb24uICovXG5mdW5jdGlvbiBwcmVJbnN0YW50aWF0ZShpbXBvcnRzKSB7XG4gIGNvbnN0IGV4dGVuZGVkRXhwb3J0cyA9IHt9O1xuXG4gIGZ1bmN0aW9uIGdldFN0cmluZyhtZW1vcnksIHB0cikge1xuICAgIGlmICghbWVtb3J5KSByZXR1cm4gXCI8eWV0IHVua25vd24+XCI7XG4gICAgcmV0dXJuIGdldFN0cmluZ0ltcGwobWVtb3J5LmJ1ZmZlciwgcHRyKTtcbiAgfVxuXG4gIC8vIGFkZCBjb21tb24gaW1wb3J0cyB1c2VkIGJ5IHN0ZGxpYiBmb3IgY29udmVuaWVuY2VcbiAgY29uc3QgZW52ID0gKGltcG9ydHMuZW52ID0gaW1wb3J0cy5lbnYgfHwge30pO1xuICBlbnYuYWJvcnQgPSBlbnYuYWJvcnQgfHwgZnVuY3Rpb24gYWJvcnQobXNnLCBmaWxlLCBsaW5lLCBjb2xtKSB7XG4gICAgY29uc3QgbWVtb3J5ID0gZXh0ZW5kZWRFeHBvcnRzLm1lbW9yeSB8fCBlbnYubWVtb3J5OyAvLyBwcmVmZXIgZXhwb3J0ZWQsIG90aGVyd2lzZSB0cnkgaW1wb3J0ZWRcbiAgICB0aHJvdyBFcnJvcihgYWJvcnQ6ICR7Z2V0U3RyaW5nKG1lbW9yeSwgbXNnKX0gYXQgJHtnZXRTdHJpbmcobWVtb3J5LCBmaWxlKX06JHtsaW5lfToke2NvbG19YCk7XG4gIH07XG4gIGVudi50cmFjZSA9IGVudi50cmFjZSB8fCBmdW5jdGlvbiB0cmFjZShtc2csIG4sIC4uLmFyZ3MpIHtcbiAgICBjb25zdCBtZW1vcnkgPSBleHRlbmRlZEV4cG9ydHMubWVtb3J5IHx8IGVudi5tZW1vcnk7XG4gICAgY29uc29sZS5sb2coYHRyYWNlOiAke2dldFN0cmluZyhtZW1vcnksIG1zZyl9JHtuID8gXCIgXCIgOiBcIlwifSR7YXJncy5zbGljZSgwLCBuKS5qb2luKFwiLCBcIil9YCk7XG4gIH07XG4gIGVudi5zZWVkID0gZW52LnNlZWQgfHwgRGF0ZS5ub3c7XG4gIGltcG9ydHMuTWF0aCA9IGltcG9ydHMuTWF0aCB8fCBNYXRoO1xuICBpbXBvcnRzLkRhdGUgPSBpbXBvcnRzLkRhdGUgfHwgRGF0ZTtcblxuICByZXR1cm4gZXh0ZW5kZWRFeHBvcnRzO1xufVxuXG4vKiogUHJlcGFyZXMgdGhlIGZpbmFsIG1vZHVsZSBvbmNlIGluc3RhbnRpYXRpb24gaXMgY29tcGxldGUuICovXG5mdW5jdGlvbiBwb3N0SW5zdGFudGlhdGUoZXh0ZW5kZWRFeHBvcnRzLCBpbnN0YW5jZSkge1xuICBjb25zdCBleHBvcnRzID0gaW5zdGFuY2UuZXhwb3J0cztcbiAgY29uc3QgbWVtb3J5ID0gZXhwb3J0cy5tZW1vcnk7XG4gIGNvbnN0IHRhYmxlID0gZXhwb3J0cy50YWJsZTtcbiAgY29uc3QgX19uZXcgPSBleHBvcnRzLl9fbmV3IHx8IEZfTk9fRVhQT1JUX1JVTlRJTUU7XG4gIGNvbnN0IF9fcGluID0gZXhwb3J0cy5fX3BpbiB8fCBGX05PX0VYUE9SVF9SVU5USU1FO1xuICBjb25zdCBfX3VucGluID0gZXhwb3J0cy5fX3VucGluIHx8IEZfTk9fRVhQT1JUX1JVTlRJTUU7XG4gIGNvbnN0IF9fY29sbGVjdCA9IGV4cG9ydHMuX19jb2xsZWN0IHx8IEZfTk9fRVhQT1JUX1JVTlRJTUU7XG4gIGNvbnN0IF9fcnR0aV9iYXNlID0gZXhwb3J0cy5fX3J0dGlfYmFzZTtcbiAgY29uc3QgZ2V0VHlwZWluZm9Db3VudCA9IF9fcnR0aV9iYXNlID8gYXJyID0+IGFycltfX3J0dGlfYmFzZSA+Pj4gMl0gOiBGX05PX0VYUE9SVF9SVU5USU1FO1xuXG4gIGV4dGVuZGVkRXhwb3J0cy5fX25ldyA9IF9fbmV3O1xuICBleHRlbmRlZEV4cG9ydHMuX19waW4gPSBfX3BpbjtcbiAgZXh0ZW5kZWRFeHBvcnRzLl9fdW5waW4gPSBfX3VucGluO1xuICBleHRlbmRlZEV4cG9ydHMuX19jb2xsZWN0ID0gX19jb2xsZWN0O1xuXG4gIC8qKiBHZXRzIHRoZSBydW50aW1lIHR5cGUgaW5mbyBmb3IgdGhlIGdpdmVuIGlkLiAqL1xuICBmdW5jdGlvbiBnZXRUeXBlaW5mbyhpZCkge1xuICAgIGNvbnN0IFUzMiA9IG5ldyBVaW50MzJBcnJheShtZW1vcnkuYnVmZmVyKTtcbiAgICBpZiAoKGlkID4+Pj0gMCkgPj0gZ2V0VHlwZWluZm9Db3VudChVMzIpKSB0aHJvdyBFcnJvcihgaW52YWxpZCBpZDogJHtpZH1gKTtcbiAgICByZXR1cm4gVTMyWyhfX3J0dGlfYmFzZSArIDQgPj4+IDIpICsgaWRdO1xuICB9XG5cbiAgLyoqIEdldHMgYW5kIHZhbGlkYXRlcyBydW50aW1lIHR5cGUgaW5mbyBmb3IgdGhlIGdpdmVuIGlkIGZvciBhcnJheSBsaWtlIG9iamVjdHMgKi9cbiAgZnVuY3Rpb24gZ2V0QXJyYXlJbmZvKGlkKSB7XG4gICAgY29uc3QgaW5mbyA9IGdldFR5cGVpbmZvKGlkKTtcbiAgICBpZiAoIShpbmZvICYgKEFSUkFZQlVGRkVSVklFVyB8IEFSUkFZIHwgU1RBVElDQVJSQVkpKSkgdGhyb3cgRXJyb3IoYG5vdCBhbiBhcnJheTogJHtpZH0sIGZsYWdzPSR7aW5mb31gKTtcbiAgICByZXR1cm4gaW5mbztcbiAgfVxuXG4gIC8qKiBHZXRzIHRoZSBydW50aW1lIGFsaWdubWVudCBvZiBhIGNvbGxlY3Rpb24ncyB2YWx1ZXMuICovXG4gIGZ1bmN0aW9uIGdldFZhbHVlQWxpZ24oaW5mbykge1xuICAgIHJldHVybiAzMSAtIE1hdGguY2x6MzIoKGluZm8gPj4+IFZBTF9BTElHTl9PRkZTRVQpICYgMzEpOyAvLyAtMSBpZiBub25lXG4gIH1cblxuICAvKiogR2V0cyB0aGUgcnVudGltZSBhbGlnbm1lbnQgb2YgYSBjb2xsZWN0aW9uJ3Mga2V5cy4gKi9cbiAgLy8gZnVuY3Rpb24gZ2V0S2V5QWxpZ24oaW5mbykge1xuICAvLyAgIHJldHVybiAzMSAtIE1hdGguY2x6MzIoKGluZm8gPj4+IEtFWV9BTElHTl9PRkZTRVQpICYgMzEpOyAvLyAtMSBpZiBub25lXG4gIC8vIH1cblxuICAvKiogQWxsb2NhdGVzIGEgbmV3IHN0cmluZyBpbiB0aGUgbW9kdWxlJ3MgbWVtb3J5IGFuZCByZXR1cm5zIGl0cyBwb2ludGVyLiAqL1xuICBmdW5jdGlvbiBfX25ld1N0cmluZyhzdHIpIHtcbiAgICBpZiAoc3RyID09IG51bGwpIHJldHVybiAwO1xuICAgIGNvbnN0IGxlbmd0aCA9IHN0ci5sZW5ndGg7XG4gICAgY29uc3QgcHRyID0gX19uZXcobGVuZ3RoIDw8IDEsIFNUUklOR19JRCk7XG4gICAgY29uc3QgVTE2ID0gbmV3IFVpbnQxNkFycmF5KG1lbW9yeS5idWZmZXIpO1xuICAgIGZvciAobGV0IGkgPSAwLCBwID0gcHRyID4+PiAxOyBpIDwgbGVuZ3RoOyArK2kpIFUxNltwICsgaV0gPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICByZXR1cm4gcHRyO1xuICB9XG5cbiAgZXh0ZW5kZWRFeHBvcnRzLl9fbmV3U3RyaW5nID0gX19uZXdTdHJpbmc7XG5cbiAgLyoqIEFsbG9jYXRlcyBhIG5ldyBBcnJheUJ1ZmZlciBpbiB0aGUgbW9kdWxlJ3MgbWVtb3J5IGFuZCByZXR1cm5zIGl0cyBwb2ludGVyLiAqL1xuICBmdW5jdGlvbiBfX25ld0FycmF5QnVmZmVyKGJ1Zikge1xuICAgIGlmIChidWYgPT0gbnVsbCkgcmV0dXJuIDA7XG4gICAgY29uc3QgYnVmdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1Zik7XG4gICAgY29uc3QgcHRyID0gX19uZXcoYnVmdmlldy5sZW5ndGgsIEFSUkFZQlVGRkVSX0lEKTtcbiAgICBjb25zdCBVOCA9IG5ldyBVaW50OEFycmF5KG1lbW9yeS5idWZmZXIpO1xuICAgIFU4LnNldChidWZ2aWV3LCBwdHIpO1xuICAgIHJldHVybiBwdHI7XG4gIH1cblxuICBleHRlbmRlZEV4cG9ydHMuX19uZXdBcnJheUJ1ZmZlciA9IF9fbmV3QXJyYXlCdWZmZXI7XG5cbiAgLyoqIFJlYWRzIGEgc3RyaW5nIGZyb20gdGhlIG1vZHVsZSdzIG1lbW9yeSBieSBpdHMgcG9pbnRlci4gKi9cbiAgZnVuY3Rpb24gX19nZXRTdHJpbmcocHRyKSB7XG4gICAgaWYgKCFwdHIpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGJ1ZmZlciA9IG1lbW9yeS5idWZmZXI7XG4gICAgY29uc3QgaWQgPSBuZXcgVWludDMyQXJyYXkoYnVmZmVyKVtwdHIgKyBJRF9PRkZTRVQgPj4+IDJdO1xuICAgIGlmIChpZCAhPT0gU1RSSU5HX0lEKSB0aHJvdyBFcnJvcihgbm90IGEgc3RyaW5nOiAke3B0cn1gKTtcbiAgICByZXR1cm4gZ2V0U3RyaW5nSW1wbChidWZmZXIsIHB0cik7XG4gIH1cblxuICBleHRlbmRlZEV4cG9ydHMuX19nZXRTdHJpbmcgPSBfX2dldFN0cmluZztcblxuICAvKiogR2V0cyB0aGUgdmlldyBtYXRjaGluZyB0aGUgc3BlY2lmaWVkIGFsaWdubWVudCwgc2lnbmVkbmVzcyBhbmQgZmxvYXRuZXNzLiAqL1xuICBmdW5jdGlvbiBnZXRWaWV3KGFsaWduTG9nMiwgc2lnbmVkLCBmbG9hdCkge1xuICAgIGNvbnN0IGJ1ZmZlciA9IG1lbW9yeS5idWZmZXI7XG4gICAgaWYgKGZsb2F0KSB7XG4gICAgICBzd2l0Y2ggKGFsaWduTG9nMikge1xuICAgICAgICBjYXNlIDI6IHJldHVybiBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGNhc2UgMzogcmV0dXJuIG5ldyBGbG9hdDY0QXJyYXkoYnVmZmVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoIChhbGlnbkxvZzIpIHtcbiAgICAgICAgY2FzZSAwOiByZXR1cm4gbmV3IChzaWduZWQgPyBJbnQ4QXJyYXkgOiBVaW50OEFycmF5KShidWZmZXIpO1xuICAgICAgICBjYXNlIDE6IHJldHVybiBuZXcgKHNpZ25lZCA/IEludDE2QXJyYXkgOiBVaW50MTZBcnJheSkoYnVmZmVyKTtcbiAgICAgICAgY2FzZSAyOiByZXR1cm4gbmV3IChzaWduZWQgPyBJbnQzMkFycmF5IDogVWludDMyQXJyYXkpKGJ1ZmZlcik7XG4gICAgICAgIGNhc2UgMzogcmV0dXJuIG5ldyAoc2lnbmVkID8gQmlnSW50NjRBcnJheSA6IEJpZ1VpbnQ2NEFycmF5KShidWZmZXIpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBFcnJvcihgdW5zdXBwb3J0ZWQgYWxpZ246ICR7YWxpZ25Mb2cyfWApO1xuICB9XG5cbiAgLyoqIEFsbG9jYXRlcyBhIG5ldyBhcnJheSBpbiB0aGUgbW9kdWxlJ3MgbWVtb3J5IGFuZCByZXR1cm5zIGl0cyBwb2ludGVyLiAqL1xuICBmdW5jdGlvbiBfX25ld0FycmF5KGlkLCB2YWx1ZXNPckNhcGFjaXR5ID0gMCkge1xuICAgIGNvbnN0IGlucHV0ID0gdmFsdWVzT3JDYXBhY2l0eTtcbiAgICBjb25zdCBpbmZvID0gZ2V0QXJyYXlJbmZvKGlkKTtcbiAgICBjb25zdCBhbGlnbiA9IGdldFZhbHVlQWxpZ24oaW5mbyk7XG4gICAgY29uc3QgaXNBcnJheUxpa2UgPSB0eXBlb2YgaW5wdXQgIT09IFwibnVtYmVyXCI7XG4gICAgY29uc3QgbGVuZ3RoID0gaXNBcnJheUxpa2UgPyBpbnB1dC5sZW5ndGggOiBpbnB1dDtcbiAgICBjb25zdCBidWYgPSBfX25ldyhsZW5ndGggPDwgYWxpZ24sIGluZm8gJiBTVEFUSUNBUlJBWSA/IGlkIDogQVJSQVlCVUZGRVJfSUQpO1xuICAgIGxldCByZXN1bHQ7XG4gICAgaWYgKGluZm8gJiBTVEFUSUNBUlJBWSkge1xuICAgICAgcmVzdWx0ID0gYnVmO1xuICAgIH0gZWxzZSB7XG4gICAgICBfX3BpbihidWYpO1xuICAgICAgY29uc3QgYXJyID0gX19uZXcoaW5mbyAmIEFSUkFZID8gQVJSQVlfU0laRSA6IEFSUkFZQlVGRkVSVklFV19TSVpFLCBpZCk7XG4gICAgICBfX3VucGluKGJ1Zik7XG4gICAgICBjb25zdCBVMzIgPSBuZXcgVWludDMyQXJyYXkobWVtb3J5LmJ1ZmZlcik7XG4gICAgICBVMzJbYXJyICsgQVJSQVlCVUZGRVJWSUVXX0JVRkZFUl9PRkZTRVQgPj4+IDJdID0gYnVmO1xuICAgICAgVTMyW2FyciArIEFSUkFZQlVGRkVSVklFV19EQVRBU1RBUlRfT0ZGU0VUID4+PiAyXSA9IGJ1ZjtcbiAgICAgIFUzMlthcnIgKyBBUlJBWUJVRkZFUlZJRVdfQllURUxFTkdUSF9PRkZTRVQgPj4+IDJdID0gbGVuZ3RoIDw8IGFsaWduO1xuICAgICAgaWYgKGluZm8gJiBBUlJBWSkgVTMyW2FyciArIEFSUkFZX0xFTkdUSF9PRkZTRVQgPj4+IDJdID0gbGVuZ3RoO1xuICAgICAgcmVzdWx0ID0gYXJyO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUxpa2UpIHtcbiAgICAgIGNvbnN0IHZpZXcgPSBnZXRWaWV3KGFsaWduLCBpbmZvICYgVkFMX1NJR05FRCwgaW5mbyAmIFZBTF9GTE9BVCk7XG4gICAgICBjb25zdCBzdGFydCA9IGJ1ZiA+Pj4gYWxpZ247XG4gICAgICBpZiAoaW5mbyAmIFZBTF9NQU5BR0VEKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICB2aWV3W3N0YXJ0ICsgaV0gPSBpbnB1dFtpXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmlldy5zZXQoaW5wdXQsIHN0YXJ0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGV4dGVuZGVkRXhwb3J0cy5fX25ld0FycmF5ID0gX19uZXdBcnJheTtcblxuICAvKiogR2V0cyBhIGxpdmUgdmlldyBvbiBhbiBhcnJheSdzIHZhbHVlcyBpbiB0aGUgbW9kdWxlJ3MgbWVtb3J5LiBJbmZlcnMgdGhlIGFycmF5IHR5cGUgZnJvbSBSVFRJLiAqL1xuICBmdW5jdGlvbiBfX2dldEFycmF5VmlldyhhcnIpIHtcbiAgICBjb25zdCBVMzIgPSBuZXcgVWludDMyQXJyYXkobWVtb3J5LmJ1ZmZlcik7XG4gICAgY29uc3QgaWQgPSBVMzJbYXJyICsgSURfT0ZGU0VUID4+PiAyXTtcbiAgICBjb25zdCBpbmZvID0gZ2V0QXJyYXlJbmZvKGlkKTtcbiAgICBjb25zdCBhbGlnbiA9IGdldFZhbHVlQWxpZ24oaW5mbyk7XG4gICAgbGV0IGJ1ZiA9IGluZm8gJiBTVEFUSUNBUlJBWVxuICAgICAgPyBhcnJcbiAgICAgIDogVTMyW2FyciArIEFSUkFZQlVGRkVSVklFV19EQVRBU1RBUlRfT0ZGU0VUID4+PiAyXTtcbiAgICBjb25zdCBsZW5ndGggPSBpbmZvICYgQVJSQVlcbiAgICAgID8gVTMyW2FyciArIEFSUkFZX0xFTkdUSF9PRkZTRVQgPj4+IDJdXG4gICAgICA6IFUzMltidWYgKyBTSVpFX09GRlNFVCA+Pj4gMl0gPj4+IGFsaWduO1xuICAgIHJldHVybiBnZXRWaWV3KGFsaWduLCBpbmZvICYgVkFMX1NJR05FRCwgaW5mbyAmIFZBTF9GTE9BVCkuc3ViYXJyYXkoYnVmID4+Pj0gYWxpZ24sIGJ1ZiArIGxlbmd0aCk7XG4gIH1cblxuICBleHRlbmRlZEV4cG9ydHMuX19nZXRBcnJheVZpZXcgPSBfX2dldEFycmF5VmlldztcblxuICAvKiogQ29waWVzIGFuIGFycmF5J3MgdmFsdWVzIGZyb20gdGhlIG1vZHVsZSdzIG1lbW9yeS4gSW5mZXJzIHRoZSBhcnJheSB0eXBlIGZyb20gUlRUSS4gKi9cbiAgZnVuY3Rpb24gX19nZXRBcnJheShhcnIpIHtcbiAgICBjb25zdCBpbnB1dCA9IF9fZ2V0QXJyYXlWaWV3KGFycik7XG4gICAgY29uc3QgbGVuID0gaW5wdXQubGVuZ3RoO1xuICAgIGNvbnN0IG91dCA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIG91dFtpXSA9IGlucHV0W2ldO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICBleHRlbmRlZEV4cG9ydHMuX19nZXRBcnJheSA9IF9fZ2V0QXJyYXk7XG5cbiAgLyoqIENvcGllcyBhbiBBcnJheUJ1ZmZlcidzIHZhbHVlIGZyb20gdGhlIG1vZHVsZSdzIG1lbW9yeS4gKi9cbiAgZnVuY3Rpb24gX19nZXRBcnJheUJ1ZmZlcihwdHIpIHtcbiAgICBjb25zdCBidWZmZXIgPSBtZW1vcnkuYnVmZmVyO1xuICAgIGNvbnN0IGxlbmd0aCA9IG5ldyBVaW50MzJBcnJheShidWZmZXIpW3B0ciArIFNJWkVfT0ZGU0VUID4+PiAyXTtcbiAgICByZXR1cm4gYnVmZmVyLnNsaWNlKHB0ciwgcHRyICsgbGVuZ3RoKTtcbiAgfVxuXG4gIGV4dGVuZGVkRXhwb3J0cy5fX2dldEFycmF5QnVmZmVyID0gX19nZXRBcnJheUJ1ZmZlcjtcblxuICAvKiogR2V0cyBhIGZ1bmN0aW9uIGZyb20gcG9pbmVyIHdoaWNoIGNvbnRhaW4gdGFibGUncyBpbmRleC4gKi9cbiAgZnVuY3Rpb24gX19nZXRGdW5jdGlvbihwdHIpIHtcbiAgICBpZiAoIXRhYmxlKSB0aHJvdyBFcnJvcihFX05PX0VYUE9SVF9UQUJMRSk7XG4gICAgY29uc3QgaW5kZXggPSBuZXcgVWludDMyQXJyYXkobWVtb3J5LmJ1ZmZlcilbcHRyID4+PiAyXTtcbiAgICByZXR1cm4gdGFibGUuZ2V0KGluZGV4KTtcbiAgfVxuXG4gIGV4dGVuZGVkRXhwb3J0cy5fX2dldEZ1bmN0aW9uID0gX19nZXRGdW5jdGlvbjtcblxuICAvKiogQ29waWVzIGEgdHlwZWQgYXJyYXkncyB2YWx1ZXMgZnJvbSB0aGUgbW9kdWxlJ3MgbWVtb3J5LiAqL1xuICBmdW5jdGlvbiBnZXRUeXBlZEFycmF5KFR5cGUsIGFsaWduTG9nMiwgcHRyKSB7XG4gICAgcmV0dXJuIG5ldyBUeXBlKGdldFR5cGVkQXJyYXlWaWV3KFR5cGUsIGFsaWduTG9nMiwgcHRyKSk7XG4gIH1cblxuICAvKiogR2V0cyBhIGxpdmUgdmlldyBvbiBhIHR5cGVkIGFycmF5J3MgdmFsdWVzIGluIHRoZSBtb2R1bGUncyBtZW1vcnkuICovXG4gIGZ1bmN0aW9uIGdldFR5cGVkQXJyYXlWaWV3KFR5cGUsIGFsaWduTG9nMiwgcHRyKSB7XG4gICAgY29uc3QgYnVmZmVyID0gbWVtb3J5LmJ1ZmZlcjtcbiAgICBjb25zdCBVMzIgPSBuZXcgVWludDMyQXJyYXkoYnVmZmVyKTtcbiAgICByZXR1cm4gbmV3IFR5cGUoXG4gICAgICBidWZmZXIsXG4gICAgICBVMzJbcHRyICsgQVJSQVlCVUZGRVJWSUVXX0RBVEFTVEFSVF9PRkZTRVQgPj4+IDJdLFxuICAgICAgVTMyW3B0ciArIEFSUkFZQlVGRkVSVklFV19CWVRFTEVOR1RIX09GRlNFVCA+Pj4gMl0gPj4+IGFsaWduTG9nMlxuICAgICk7XG4gIH1cblxuICAvKiogQXR0YWNoIGEgc2V0IG9mIGdldCBUeXBlZEFycmF5IGFuZCBWaWV3IGZ1bmN0aW9ucyB0byB0aGUgZXhwb3J0cy4gKi9cbiAgZnVuY3Rpb24gYXR0YWNoVHlwZWRBcnJheUZ1bmN0aW9ucyhjdG9yLCBuYW1lLCBhbGlnbikge1xuICAgIGV4dGVuZGVkRXhwb3J0c1tgX19nZXQke25hbWV9YF0gPSBnZXRUeXBlZEFycmF5LmJpbmQobnVsbCwgY3RvciwgYWxpZ24pO1xuICAgIGV4dGVuZGVkRXhwb3J0c1tgX19nZXQke25hbWV9Vmlld2BdID0gZ2V0VHlwZWRBcnJheVZpZXcuYmluZChudWxsLCBjdG9yLCBhbGlnbik7XG4gIH1cblxuICBbXG4gICAgSW50OEFycmF5LFxuICAgIFVpbnQ4QXJyYXksXG4gICAgVWludDhDbGFtcGVkQXJyYXksXG4gICAgSW50MTZBcnJheSxcbiAgICBVaW50MTZBcnJheSxcbiAgICBJbnQzMkFycmF5LFxuICAgIFVpbnQzMkFycmF5LFxuICAgIEZsb2F0MzJBcnJheSxcbiAgICBGbG9hdDY0QXJyYXlcbiAgXS5mb3JFYWNoKGN0b3IgPT4ge1xuICAgIGF0dGFjaFR5cGVkQXJyYXlGdW5jdGlvbnMoY3RvciwgY3Rvci5uYW1lLCAzMSAtIE1hdGguY2x6MzIoY3Rvci5CWVRFU19QRVJfRUxFTUVOVCkpO1xuICB9KTtcblxuICBpZiAoQklHSU5UKSB7XG4gICAgW0JpZ1VpbnQ2NEFycmF5LCBCaWdJbnQ2NEFycmF5XS5mb3JFYWNoKGN0b3IgPT4ge1xuICAgICAgYXR0YWNoVHlwZWRBcnJheUZ1bmN0aW9ucyhjdG9yLCBjdG9yLm5hbWUuc2xpY2UoMyksIDMpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gUHVsbCBiYXNpYyBleHBvcnRzIHRvIGV4dGVuZGVkRXhwb3J0cyBzbyBjb2RlIGluIHByZUluc3RhbnRpYXRlIGNhbiB1c2UgdGhlbVxuICBleHRlbmRlZEV4cG9ydHMubWVtb3J5ID0gZXh0ZW5kZWRFeHBvcnRzLm1lbW9yeSB8fCBtZW1vcnk7XG4gIGV4dGVuZGVkRXhwb3J0cy50YWJsZSAgPSBleHRlbmRlZEV4cG9ydHMudGFibGUgIHx8IHRhYmxlO1xuXG4gIC8vIERlbWFuZ2xlIGV4cG9ydHMgYW5kIHByb3ZpZGUgdGhlIHVzdWFsIHV0aWxpdHkgb24gdGhlIHByb3RvdHlwZVxuICByZXR1cm4gZGVtYW5nbGUoZXhwb3J0cywgZXh0ZW5kZWRFeHBvcnRzKTtcbn1cblxuZnVuY3Rpb24gaXNSZXNwb25zZShzcmMpIHtcbiAgcmV0dXJuIHR5cGVvZiBSZXNwb25zZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzcmMgaW5zdGFuY2VvZiBSZXNwb25zZTtcbn1cblxuZnVuY3Rpb24gaXNNb2R1bGUoc3JjKSB7XG4gIHJldHVybiBzcmMgaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5Nb2R1bGU7XG59XG5cbi8qKiBBc3luY2hyb25vdXNseSBpbnN0YW50aWF0ZXMgYW4gQXNzZW1ibHlTY3JpcHQgbW9kdWxlIGZyb20gYW55dGhpbmcgdGhhdCBjYW4gYmUgaW5zdGFudGlhdGVkLiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluc3RhbnRpYXRlKHNvdXJjZSwgaW1wb3J0cyA9IHt9KSB7XG4gIGlmIChpc1Jlc3BvbnNlKHNvdXJjZSA9IGF3YWl0IHNvdXJjZSkpIHJldHVybiBpbnN0YW50aWF0ZVN0cmVhbWluZyhzb3VyY2UsIGltcG9ydHMpO1xuICBjb25zdCBtb2R1bGUgPSBpc01vZHVsZShzb3VyY2UpID8gc291cmNlIDogYXdhaXQgV2ViQXNzZW1ibHkuY29tcGlsZShzb3VyY2UpO1xuICBjb25zdCBleHRlbmRlZCA9IHByZUluc3RhbnRpYXRlKGltcG9ydHMpO1xuICBjb25zdCBpbnN0YW5jZSA9IGF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKG1vZHVsZSwgaW1wb3J0cyk7XG4gIGNvbnN0IGV4cG9ydHMgPSBwb3N0SW5zdGFudGlhdGUoZXh0ZW5kZWQsIGluc3RhbmNlKTtcbiAgcmV0dXJuIHsgbW9kdWxlLCBpbnN0YW5jZSwgZXhwb3J0cyB9O1xufVxuXG4vKiogU3luY2hyb25vdXNseSBpbnN0YW50aWF0ZXMgYW4gQXNzZW1ibHlTY3JpcHQgbW9kdWxlIGZyb20gYSBXZWJBc3NlbWJseS5Nb2R1bGUgb3IgYmluYXJ5IGJ1ZmZlci4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YW50aWF0ZVN5bmMoc291cmNlLCBpbXBvcnRzID0ge30pIHtcbiAgY29uc3QgbW9kdWxlID0gaXNNb2R1bGUoc291cmNlKSA/IHNvdXJjZSA6IG5ldyBXZWJBc3NlbWJseS5Nb2R1bGUoc291cmNlKTtcbiAgY29uc3QgZXh0ZW5kZWQgPSBwcmVJbnN0YW50aWF0ZShpbXBvcnRzKTtcbiAgY29uc3QgaW5zdGFuY2UgPSBuZXcgV2ViQXNzZW1ibHkuSW5zdGFuY2UobW9kdWxlLCBpbXBvcnRzKTtcbiAgY29uc3QgZXhwb3J0cyA9IHBvc3RJbnN0YW50aWF0ZShleHRlbmRlZCwgaW5zdGFuY2UpO1xuICByZXR1cm4geyBtb2R1bGUsIGluc3RhbmNlLCBleHBvcnRzIH07XG59XG5cbi8qKiBBc3luY2hyb25vdXNseSBpbnN0YW50aWF0ZXMgYW4gQXNzZW1ibHlTY3JpcHQgbW9kdWxlIGZyb20gYSByZXNwb25zZSwgaS5lLiBhcyBvYnRhaW5lZCBieSBgZmV0Y2hgLiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluc3RhbnRpYXRlU3RyZWFtaW5nKHNvdXJjZSwgaW1wb3J0cyA9IHt9KSB7XG4gIGlmICghV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmcpIHtcbiAgICByZXR1cm4gaW5zdGFudGlhdGUoXG4gICAgICBpc1Jlc3BvbnNlKHNvdXJjZSA9IGF3YWl0IHNvdXJjZSlcbiAgICAgICAgPyBzb3VyY2UuYXJyYXlCdWZmZXIoKVxuICAgICAgICA6IHNvdXJjZSxcbiAgICAgIGltcG9ydHNcbiAgICApO1xuICB9XG4gIGNvbnN0IGV4dGVuZGVkID0gcHJlSW5zdGFudGlhdGUoaW1wb3J0cyk7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKHNvdXJjZSwgaW1wb3J0cyk7XG4gIGNvbnN0IGV4cG9ydHMgPSBwb3N0SW5zdGFudGlhdGUoZXh0ZW5kZWQsIHJlc3VsdC5pbnN0YW5jZSk7XG4gIHJldHVybiB7IC4uLnJlc3VsdCwgZXhwb3J0cyB9O1xufVxuXG4vKiogRGVtYW5nbGVzIGFuIEFzc2VtYmx5U2NyaXB0IG1vZHVsZSdzIGV4cG9ydHMgdG8gYSBmcmllbmRseSBvYmplY3Qgc3RydWN0dXJlLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlbWFuZ2xlKGV4cG9ydHMsIGV4dGVuZGVkRXhwb3J0cyA9IHt9KSB7XG4gIGNvbnN0IHNldEFyZ3VtZW50c0xlbmd0aCA9IGV4cG9ydHNbXCJfX2FyZ3VtZW50c0xlbmd0aFwiXVxuICAgID8gbGVuZ3RoID0+IHsgZXhwb3J0c1tcIl9fYXJndW1lbnRzTGVuZ3RoXCJdLnZhbHVlID0gbGVuZ3RoOyB9XG4gICAgOiBleHBvcnRzW1wiX19zZXRBcmd1bWVudHNMZW5ndGhcIl0gfHwgZXhwb3J0c1tcIl9fc2V0YXJnY1wiXSB8fCAoKCkgPT4geyAvKiBub3AgKi8gfSk7XG4gIGZvciAobGV0IGludGVybmFsTmFtZSBvZiBPYmplY3Qua2V5cyhleHBvcnRzKSkge1xuICAgIGNvbnN0IGVsZW0gPSBleHBvcnRzW2ludGVybmFsTmFtZV07XG4gICAgbGV0IHBhcnRzID0gaW50ZXJuYWxOYW1lLnNwbGl0KFwiLlwiKTtcbiAgICBsZXQgY3VyciA9IGV4dGVuZGVkRXhwb3J0cztcbiAgICB3aGlsZSAocGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgbGV0IHBhcnQgPSBwYXJ0cy5zaGlmdCgpO1xuICAgICAgaWYgKCFPYmplY3QuaGFzT3duKGN1cnIsIHBhcnQpKSBjdXJyW3BhcnRdID0ge307XG4gICAgICBjdXJyID0gY3VycltwYXJ0XTtcbiAgICB9XG4gICAgbGV0IG5hbWUgPSBwYXJ0c1swXTtcbiAgICBsZXQgaGFzaCA9IG5hbWUuaW5kZXhPZihcIiNcIik7XG4gICAgaWYgKGhhc2ggPj0gMCkge1xuICAgICAgY29uc3QgY2xhc3NOYW1lID0gbmFtZS5zdWJzdHJpbmcoMCwgaGFzaCk7XG4gICAgICBjb25zdCBjbGFzc0VsZW0gPSBjdXJyW2NsYXNzTmFtZV07XG4gICAgICBpZiAodHlwZW9mIGNsYXNzRWxlbSA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhY2xhc3NFbGVtLnByb3RvdHlwZSkge1xuICAgICAgICBjb25zdCBjdG9yID0gZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgICAgIHJldHVybiBjdG9yLndyYXAoY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IoMCwgLi4uYXJncykpO1xuICAgICAgICB9O1xuICAgICAgICBjdG9yLnByb3RvdHlwZSA9IHtcbiAgICAgICAgICB2YWx1ZU9mKCkgeyByZXR1cm4gdGhpc1tUSElTXTsgfVxuICAgICAgICB9O1xuICAgICAgICBjdG9yLndyYXAgPSBmdW5jdGlvbih0aGlzVmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZShjdG9yLnByb3RvdHlwZSwgeyBbVEhJU106IHsgdmFsdWU6IHRoaXNWYWx1ZSwgd3JpdGFibGU6IGZhbHNlIH0gfSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChjbGFzc0VsZW0pIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGNsYXNzRWxlbSkuZm9yRWFjaChuYW1lID0+XG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0b3IsIG5hbWUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoY2xhc3NFbGVtLCBuYW1lKSlcbiAgICAgICAgKTtcbiAgICAgICAgY3VycltjbGFzc05hbWVdID0gY3RvcjtcbiAgICAgIH1cbiAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZyhoYXNoICsgMSk7XG4gICAgICBjdXJyID0gY3VycltjbGFzc05hbWVdLnByb3RvdHlwZTtcbiAgICAgIGlmICgvXihnZXR8c2V0KTovLnRlc3QobmFtZSkpIHtcbiAgICAgICAgaWYgKCFPYmplY3QuaGFzT3duKGN1cnIsIG5hbWUgPSBuYW1lLnN1YnN0cmluZyg0KSkpIHtcbiAgICAgICAgICBsZXQgZ2V0dGVyID0gZXhwb3J0c1tpbnRlcm5hbE5hbWUucmVwbGFjZShcInNldDpcIiwgXCJnZXQ6XCIpXTtcbiAgICAgICAgICBsZXQgc2V0dGVyID0gZXhwb3J0c1tpbnRlcm5hbE5hbWUucmVwbGFjZShcImdldDpcIiwgXCJzZXQ6XCIpXTtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3VyciwgbmFtZSwge1xuICAgICAgICAgICAgZ2V0KCkgeyByZXR1cm4gZ2V0dGVyKHRoaXNbVEhJU10pOyB9LFxuICAgICAgICAgICAgc2V0KHZhbHVlKSB7IHNldHRlcih0aGlzW1RISVNdLCB2YWx1ZSk7IH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChuYW1lID09PSAnY29uc3RydWN0b3InKSB7XG4gICAgICAgICAgKGN1cnJbbmFtZV0gPSBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgICAgICAgICBzZXRBcmd1bWVudHNMZW5ndGgoYXJncy5sZW5ndGgpO1xuICAgICAgICAgICAgcmV0dXJuIGVsZW0oLi4uYXJncyk7XG4gICAgICAgICAgfSkub3JpZ2luYWwgPSBlbGVtO1xuICAgICAgICB9IGVsc2UgeyAvLyBpbnN0YW5jZSBtZXRob2RcbiAgICAgICAgICAoY3VycltuYW1lXSA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHsgLy8gIVxuICAgICAgICAgICAgc2V0QXJndW1lbnRzTGVuZ3RoKGFyZ3MubGVuZ3RoKTtcbiAgICAgICAgICAgIHJldHVybiBlbGVtKHRoaXNbVEhJU10sIC4uLmFyZ3MpO1xuICAgICAgICAgIH0pLm9yaWdpbmFsID0gZWxlbTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoL14oZ2V0fHNldCk6Ly50ZXN0KG5hbWUpKSB7XG4gICAgICAgIGlmICghT2JqZWN0Lmhhc093bihjdXJyLCBuYW1lID0gbmFtZS5zdWJzdHJpbmcoNCkpKSB7XG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN1cnIsIG5hbWUsIHtcbiAgICAgICAgICAgIGdldDogZXhwb3J0c1tpbnRlcm5hbE5hbWUucmVwbGFjZShcInNldDpcIiwgXCJnZXQ6XCIpXSxcbiAgICAgICAgICAgIHNldDogZXhwb3J0c1tpbnRlcm5hbE5hbWUucmVwbGFjZShcImdldDpcIiwgXCJzZXQ6XCIpXSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZWxlbSA9PT0gXCJmdW5jdGlvblwiICYmIGVsZW0gIT09IHNldEFyZ3VtZW50c0xlbmd0aCkge1xuICAgICAgICAoY3VycltuYW1lXSA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgc2V0QXJndW1lbnRzTGVuZ3RoKGFyZ3MubGVuZ3RoKTtcbiAgICAgICAgICByZXR1cm4gZWxlbSguLi5hcmdzKTtcbiAgICAgICAgfSkub3JpZ2luYWwgPSBlbGVtO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycltuYW1lXSA9IGVsZW07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBleHRlbmRlZEV4cG9ydHM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaW5zdGFudGlhdGUsXG4gIGluc3RhbnRpYXRlU3luYyxcbiAgaW5zdGFudGlhdGVTdHJlYW1pbmcsXG4gIGRlbWFuZ2xlXG59O1xuIiwiaW1wb3J0IHsgZGVjb2RlQ2hhckFycmF5LCBnZXRNb2R1bGUgfSBmcm9tICcuL3dhc21Mb2FkZXInO1xuXG5leHBvcnQgbGV0IGFwaTogYW55IHwgbnVsbCA9IG51bGw7XG5cbm9ubG9hZCA9ICgpID0+IHtcblx0aWYgKCAhIGFwaSApXG5cdFx0Z2V0TW9kdWxlKClcblx0XHRcdC50aGVuKCAoIE1vZHVsZSApID0+IHtcblx0XHRcdFx0YXBpID0gTW9kdWxlLmV4cG9ydHM7XG5cblx0XHRcdFx0Y29uc3QgbXNnID0gZGVjb2RlQ2hhckFycmF5KFxuXHRcdFx0XHRcdGFwaS5oZWxsbygpLFxuXHRcdFx0XHRcdG5ldyBVaW50OEFycmF5KCBhcGkubWVtb3J5LmJ1ZmZlciApXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICcuYmxvY2std2FzbScgKS5mb3JFYWNoKCAoIGVsICkgPT4ge1xuXHRcdFx0XHRcdGVsLnZhbHVlID0gbXNnO1xuXHRcdFx0XHR9ICk7XG5cdFx0XHR9IClcblx0XHRcdC5jYXRjaCggKCBlcnIgKSA9PiBjb25zb2xlLmxvZyggZXJyICkgKTtcblxuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCAnLmJsb2NrLXdhc20gaW5wdXQuYnV0dG9uJyApLmZvckVhY2goICggZWwgKSA9PiB7XG5cdFx0ZWwub25jbGljayA9ICgpID0+IHtcblx0XHRcdGNvbnN0IGlucHV0ID0gZWwucHJldmlvdXNTaWJsaW5nO1xuXHRcdFx0aW5wdXQudmFsdWUgPSBwYXJzZUludChhcGkuZmliKCBpbnB1dC52YWx1ZSApLCAxMCk7XG5cdFx0fTtcblx0fSApO1xufTtcbiIsImltcG9ydCBsb2FkZXIgZnJvbSAnQGFzc2VtYmx5c2NyaXB0L2xvYWRlcic7XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWNvZGVDaGFyQXJyYXkoIHRlc3QsIGJ1ZmZlciApIHtcblx0bGV0IG15dGV4dCA9ICcnO1xuXHRmb3IgKCBsZXQgaSA9IHRlc3Q7IGJ1ZmZlclsgaSBdOyBpKysgKSB7XG5cdFx0bXl0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoIGJ1ZmZlclsgaSBdICk7XG5cdH1cblx0cmV0dXJuIG15dGV4dDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1vZHVsZSgpIHtcblx0cmV0dXJuIGxvYWRlclxuXHRcdC5pbnN0YW50aWF0ZShcblx0XHRcdGZldGNoKFxuXHRcdFx0XHQnaHR0cDovL2xvY2FsaG9zdDo4ODg4L3dwLWNvbnRlbnQvcGx1Z2lucy93cC13YXNtLWJsb2NrL2J1aWxkL2hlbGxvLndhc20nXG5cdFx0XHQpLFxuXHRcdFx0e31cblx0XHQpXG5cdFx0LnRoZW4oICggbW9kdWxlICkgPT4gbW9kdWxlICk7XG59XG4iXSwibmFtZXMiOlsiSURfT0ZGU0VUIiwiU0laRV9PRkZTRVQiLCJBUlJBWUJVRkZFUl9JRCIsIlNUUklOR19JRCIsIkFSUkFZQlVGRkVSVklFVyIsIkFSUkFZIiwiU1RBVElDQVJSQVkiLCJWQUxfQUxJR05fT0ZGU0VUIiwiVkFMX1NJR05FRCIsIlZBTF9GTE9BVCIsIlZBTF9NQU5BR0VEIiwiQVJSQVlCVUZGRVJWSUVXX0JVRkZFUl9PRkZTRVQiLCJBUlJBWUJVRkZFUlZJRVdfREFUQVNUQVJUX09GRlNFVCIsIkFSUkFZQlVGRkVSVklFV19CWVRFTEVOR1RIX09GRlNFVCIsIkFSUkFZQlVGRkVSVklFV19TSVpFIiwiQVJSQVlfTEVOR1RIX09GRlNFVCIsIkFSUkFZX1NJWkUiLCJFX05PX0VYUE9SVF9UQUJMRSIsIkZfTk9fRVhQT1JUX1JVTlRJTUUiLCJFcnJvciIsIkJJR0lOVCIsIkJpZ1VpbnQ2NEFycmF5IiwiVEhJUyIsIlN5bWJvbCIsIlNUUklOR19TTUFMTFNJWkUiLCJTVFJJTkdfQ0hVTktTSVpFIiwidXRmMTYiLCJUZXh0RGVjb2RlciIsImZhdGFsIiwiZ2V0U3RyaW5nSW1wbCIsImJ1ZmZlciIsInB0ciIsImxlbiIsIlVpbnQzMkFycmF5Iiwid3RmMTYiLCJVaW50MTZBcnJheSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImRlY29kZSIsInN0ciIsIm9mZiIsInN1YmFycmF5IiwicHJlSW5zdGFudGlhdGUiLCJpbXBvcnRzIiwiZXh0ZW5kZWRFeHBvcnRzIiwiZ2V0U3RyaW5nIiwibWVtb3J5IiwiZW52IiwiYWJvcnQiLCJtc2ciLCJmaWxlIiwibGluZSIsImNvbG0iLCJ0cmFjZSIsIm4iLCJhcmdzIiwiY29uc29sZSIsImxvZyIsInNsaWNlIiwiam9pbiIsInNlZWQiLCJEYXRlIiwibm93IiwiTWF0aCIsInBvc3RJbnN0YW50aWF0ZSIsImluc3RhbmNlIiwiZXhwb3J0cyIsInRhYmxlIiwiX19uZXciLCJfX3BpbiIsIl9fdW5waW4iLCJfX2NvbGxlY3QiLCJfX3J0dGlfYmFzZSIsImdldFR5cGVpbmZvQ291bnQiLCJhcnIiLCJnZXRBcnJheUluZm8iLCJpZCIsImluZm8iLCJVMzIiLCJnZXRUeXBlaW5mbyIsImdldFZhbHVlQWxpZ24iLCJjbHozMiIsImdldFZpZXciLCJhbGlnbkxvZzIiLCJzaWduZWQiLCJmbG9hdCIsIkZsb2F0MzJBcnJheSIsIkZsb2F0NjRBcnJheSIsIkludDhBcnJheSIsIlVpbnQ4QXJyYXkiLCJJbnQxNkFycmF5IiwiSW50MzJBcnJheSIsIkJpZ0ludDY0QXJyYXkiLCJfX2dldEFycmF5VmlldyIsImFsaWduIiwiYnVmIiwibGVuZ3RoIiwiZ2V0VHlwZWRBcnJheSIsIlR5cGUiLCJnZXRUeXBlZEFycmF5VmlldyIsImF0dGFjaFR5cGVkQXJyYXlGdW5jdGlvbnMiLCJjdG9yIiwibmFtZSIsImJpbmQiLCJfX25ld1N0cmluZyIsIlUxNiIsImkiLCJwIiwiY2hhckNvZGVBdCIsIl9fbmV3QXJyYXlCdWZmZXIiLCJidWZ2aWV3Iiwic2V0IiwiX19nZXRTdHJpbmciLCJfX25ld0FycmF5IiwidmFsdWVzT3JDYXBhY2l0eSIsImlucHV0IiwiaXNBcnJheUxpa2UiLCJyZXN1bHQiLCJ2aWV3Iiwic3RhcnQiLCJfX2dldEFycmF5Iiwib3V0IiwiQXJyYXkiLCJfX2dldEFycmF5QnVmZmVyIiwiX19nZXRGdW5jdGlvbiIsImluZGV4IiwiZ2V0IiwiVWludDhDbGFtcGVkQXJyYXkiLCJmb3JFYWNoIiwiQllURVNfUEVSX0VMRU1FTlQiLCJkZW1hbmdsZSIsImlzUmVzcG9uc2UiLCJzcmMiLCJSZXNwb25zZSIsImlzTW9kdWxlIiwiV2ViQXNzZW1ibHkiLCJNb2R1bGUiLCJhc3luYyIsImluc3RhbnRpYXRlIiwic291cmNlIiwiaW5zdGFudGlhdGVTdHJlYW1pbmciLCJtb2R1bGUiLCJjb21waWxlIiwiZXh0ZW5kZWQiLCJhcnJheUJ1ZmZlciIsInNldEFyZ3VtZW50c0xlbmd0aCIsInZhbHVlIiwiaW50ZXJuYWxOYW1lIiwiT2JqZWN0Iiwia2V5cyIsImVsZW0iLCJwYXJ0cyIsInNwbGl0IiwiY3VyciIsInBhcnQiLCJzaGlmdCIsImhhc093biIsImhhc2giLCJpbmRleE9mIiwiY2xhc3NOYW1lIiwic3Vic3RyaW5nIiwiY2xhc3NFbGVtIiwicHJvdG90eXBlIiwid3JhcCIsImNvbnN0cnVjdG9yIiwidmFsdWVPZiIsInRoaXMiLCJ0aGlzVmFsdWUiLCJjcmVhdGUiLCJ3cml0YWJsZSIsImdldE93blByb3BlcnR5TmFtZXMiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInRlc3QiLCJnZXR0ZXIiLCJyZXBsYWNlIiwic2V0dGVyIiwiZW51bWVyYWJsZSIsIm9yaWdpbmFsIiwib2JqIiwicHJvcCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluc3RhbnRpYXRlU3luYyIsIkluc3RhbmNlIiwiYXBpIiwib25sb2FkIiwibG9hZGVyIiwiZmV0Y2giLCJ0aGVuIiwiZ2V0TW9kdWxlIiwibXl0ZXh0IiwiZGVjb2RlQ2hhckFycmF5IiwiaGVsbG8iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbCIsImNhdGNoIiwiZXJyIiwib25jbGljayIsInByZXZpb3VzU2libGluZyIsInBhcnNlSW50IiwiZmliIl0sInNvdXJjZVJvb3QiOiIifQ==